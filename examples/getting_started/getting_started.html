<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting started &mdash; subsurface 0.2.7.dev22+gf6e092c documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-rendered-html.css" type="text/css" /><link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Reading Well Data into Subsurface" href="../tutorials/reading_well_data.html" />
    <link rel="prev" title="Reading Simple GemPy model in Subsurface" href="../examples/gempy_model.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html"><img src="../../_static/subsurface.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                0.2.7.dev22+gf6e092c
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../manual.html">Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintenance.html">Maintenance</a></li>
</ul>
<p class="caption"><span class="caption-text">Galleries</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#sphx-glr-examples-examples">Examples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#getting-started">Getting Started</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Getting started</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#tutorials">Tutorials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../external/external_examples.html">External Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../code-geological-formats.html">Geological Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-interfaces.html">Interfaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-reader.html">Reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-structs.html">Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-utils.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-viz.html">Visualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../code-writer.html">Writer</a></li>
</ul>


    
        <p class="caption">
            <span class="caption-text">Links</span>
        </p>
        <ul>
            
                <li class="toctree-l1"><a href="https://softwareunderground.org"><i class="fa fa-link fa-fw"></i> SWUNG</a></li>
            
                <li class="toctree-l1"><a href="https://swu.ng/slack"><i class="fa fa-slack fa-fw"></i> Slack</a></li>
            
                <li class="toctree-l1"><a href="https://github.com/softwareunderground/subsurface"><i class="fa fa-github fa-fw"></i> Source Code</a></li>
            
        </ul>
    

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">subsurface</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../index.html">Examples</a> &raquo;</li>
      <li>Getting started</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/examples/getting_started/getting_started.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="../examples/gempy_model.html" class="btn btn-neutral float-left" title="Reading Simple GemPy model in Subsurface" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../tutorials/reading_well_data.html" class="btn btn-neutral float-right" title="Reading Well Data into Subsurface" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-examples-getting-started-getting-started-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="getting-started">
<span id="sphx-glr-examples-getting-started-getting-started-py"></span><h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>Authors: Miguel de la Varga and Alexander Juestel</p>
<p>This example shows how to read into subsurface structures a bunch of different
data such as:</p>
<ul class="simple">
<li><p>well data -&gt; from csv all in one single file</p></li>
<li><p>topography -&gt; from tif</p></li>
<li><p>Cross sections with textures from trace -&gt; shp, png</p></li>
<li><p>Exported gempy model from netcdf</p></li>
</ul>
<p>import shutil
import pandas as pd</p>
<p>import subsurface as ss
import pooch</p>
<p># %%
# Read wells:
# ———–
# We can read well data - using welly as the backend. First we need to have the
# data in the right format for digesting.</p>
<p># %%</p>
<p># Pulling data example
import subsurface.reader.profiles.profiles_core
import subsurface.reader.read_netcdf
import subsurface.reader.topography.topo_core
import subsurface.reader.wells.wells_api
from subsurface.reader.wells.wells_api import read_wells_to_unstruct, borehole_location_to_unstruct
from subsurface.reader.readers_data import ReaderWellsHelper, ReaderFilesHelper
from subsurface.structs.base_structures.common_data_utils import replace_outliers</p>
<dl>
<dt>model_file = pooch.retrieve(</dt><dd><dl class="simple">
<dt>url=”<a class="reference external" href="https://github.com/cgre-aachen/gempy_data/raw/master/">https://github.com/cgre-aachen/gempy_data/raw/master/</a>”</dt><dd><p>“data/subsurface/example1.zip”,</p>
</dd>
</dl>
<p>known_hash=None</p>
</dd>
</dl>
<p>)</p>
<p>data_path = model_file[:-4]
shutil.unpack_archive(model_file, extract_dir=model_file[:-4])</p>
<p># Read original file
ori_wells = pd.read_csv(data_path + ‘/wells.csv’)</p>
<p># Add top and base columns
wells_fixed = ss.reader.wells.add_tops_from_base_and_altitude_in_place(</p>
<blockquote>
<div><p>ori_wells,
‘Index’,
‘Z’,
‘Altitude’</p>
</div></blockquote>
<p>)</p>
<p>wells_fixed[‘md’] = wells_fixed[‘top’]
wells_fixed.to_csv(data_path + ‘/wells.csv’)
wells_fixed</p>
<p># %%md
# Now we can read the csv files into subsurface.UnstructuredData</p>
<p># %%
# To help loading files we can use the following helper dataclass
reader_collars_helper = ReaderFilesHelper(file_or_buffer=data_path + ‘/wells.csv’,</p>
<blockquote>
<div><p>usecols=[‘Index’, ‘X’, ‘Y’, ‘Altitude’], header=0)</p>
</div></blockquote>
<p>reader_collars_helper</p>
<p># %%
reader_wells_helper = ReaderWellsHelper(</p>
<blockquote>
<div><p>reader_collars_args=reader_collars_helper,
reader_survey_args=ReaderFilesHelper(</p>
<blockquote>
<div><p>file_or_buffer=data_path + ‘/wells.csv’,
index_col=”Index”,
usecols=[‘Index’, ‘md’]</p>
</div></blockquote>
<p>),
reader_lith_args=ReaderFilesHelper(</p>
<blockquote>
<div><p>file_or_buffer=data_path + ‘/wells.csv’,
index_col=”Index”,
columns_map={‘top’: ‘top’, ‘base’: ‘base’, ‘formation’: ‘component lith’},
usecols=[‘Index’, ‘top’, ‘base’, ‘formation’]</p>
</div></blockquote>
<p>)</p>
</div></blockquote>
<p>)
reader_wells_helper</p>
<p># %%
wells_unstructured_data = read_wells_to_unstruct(reader_wells_helper)</p>
<p># %%
wells_unstructured_data</p>
<p># %%md
# From UnstructuredData we can create geometric objects such a lines, points, meshes,
# etc. In the case of boreholes <cite>subsurface.LineSet</cite> is the most suitable geometric
# representation.</p>
<p># %%
wells_element = ss.LineSet(wells_unstructured_data)</p>
<p># %%
# All elements in subsurface have their direct link to a pyvista mesh. This
# transformation can be done by the functions <cite>to_pyvista_…</cite>.</p>
<p># Pyvista mesh
wells_mesh = ss.visualization.to_pyvista_line(wells_element, radius=50)</p>
<p># Plotting
ss.visualization.pv_plot(</p>
<blockquote>
<div><p>[wells_mesh],
image_2d=False,
ve=5</p>
</div></blockquote>
<p>)</p>
<p># %%md
# We can do the same for point data, for example the borehole location.</p>
<p># %%</p>
<p># UnstructuredData
borehole_location_struct = borehole_location_to_unstruct(</p>
<blockquote>
<div><dl class="simple">
<dt>ReaderFilesHelper(</dt><dd><p>file_or_buffer=data_path + ‘/wells.csv’,
usecols=[‘Index’, ‘X’, ‘Y’, ‘Altitude’],
header=0,
columns_map={‘X’: ‘x’, ‘Y’: ‘y’, ‘Altitude’: ‘altitude’}</p>
</dd>
</dl>
<p>)</p>
</div></blockquote>
<p>)
borehole_location_struct</p>
<p># %%
# Element
borehole_location_point_set = ss.PointSet(borehole_location_struct)
borehole_location_point_set</p>
<p># %%
# Pyvista mesh
borehole_loc_mesh = ss.visualization.to_pyvista_points(borehole_location_point_set)
borehole_loc_mesh</p>
<p># %%
ss.visualization.pv_plot([borehole_loc_mesh], image_2d=False, ve=5)</p>
<p># %%md
# Read Topography
# —————</p>
<p># %%</p>
<p># StructuredData
topo_structured_data = subsurface.reader.topography.topo_core.read_structured_topography(data_path + ‘/DEM50.tif’)
topo_structured_data
# %%
# Remove outliers
replace_outliers(topo_structured_data, ‘topography’, 0.98)</p>
<p># Element
topo_element = ss.structs.StructuredGrid(topo_structured_data)
topo_element</p>
<p># Pyvista mesh
topo_mesh = ss.visualization.to_pyvista_grid(topo_element, ‘topography’,</p>
<blockquote>
<div><p>data_order=’C’)</p>
</div></blockquote>
<p># %%
ss.visualization.pv_plot([topo_mesh], image_2d=False, ve=5)</p>
<p># %%md
# Read Profiles
# ————-</p>
<p># %%</p>
<dl class="simple">
<dt>profiles_traces = subsurface.reader.profiles.profiles_core.lineset_from_trace(</dt><dd><p>data_path + ‘/Profiles_cropped/Profile_PyVista.shp’,
idx=range(13)</p>
</dd>
</dl>
<p>)</p>
<p># %%
profiles_trisurf_list, profiles_mesh_list = subsurface.reader.profiles.profiles_core.create_tri_surf_from_traces_texture(</p>
<blockquote>
<div><p>data_path + ‘/Profiles_cropped/Profile_PyVista.shp’,
path_to_texture=[</p>
<blockquote>
<div><p>data_path + ‘/Profiles_cropped/profile001.png’,
data_path + ‘/Profiles_cropped/profile002.png’,
data_path + ‘/Profiles_cropped/profile003.png’,
data_path + ‘/Profiles_cropped/profile004.png’,
data_path + ‘/Profiles_cropped/profile005.png’,
data_path + ‘/Profiles_cropped/profile006.png’,
data_path + ‘/Profiles_cropped/profile007.png’,
data_path + ‘/Profiles_cropped/profile008.png’,
data_path + ‘/Profiles_cropped/profile009.png’,
data_path + ‘/Profiles_cropped/profile010.png’,
data_path + ‘/Profiles_cropped/profile011.png’,
data_path + ‘/Profiles_cropped/profile012.png’,
data_path + ‘/Profiles_cropped/profile013.png’,</p>
</div></blockquote>
<p>],
idx=range(13),
return_mesh=True,
return_uv=True</p>
</div></blockquote>
<p>)</p>
<p># %%
ss.visualization.pv_plot(profiles_mesh_list, image_2d=False, ve=5)</p>
<p># %%md
# GemPy Mesh
# ———-</p>
<p># %%
# UnstructuredData
gempy_unstructured_data = subsurface.reader.read_netcdf.read_unstruct(data_path + ‘/meshes.nc’)</p>
<p># Element
trisurf_gempy = ss.TriSurf(gempy_unstructured_data)</p>
<p># Pyvista mesh
gempy_mesh = ss.visualization.to_pyvista_mesh(trisurf_gempy)</p>
<p># %%
ss.visualization.pv_plot(</p>
<blockquote>
<div><p>[gempy_mesh],
image_2d=False,
ve=5</p>
</div></blockquote>
<p>)</p>
<p># %%
# sphinx_gallery_thumbnail_number = 6</p>
<p># %%
# Export to binary
# —————-</p>
<p># %%
subsurface.writer.to_binary.base_structs_to_binary_file(data_path + ‘/wells’,</p>
<blockquote>
<div><p>wells_unstructured_data)</p>
</div></blockquote>
<dl class="simple">
<dt>subsurface.writer.to_binary.base_structs_to_binary_file(data_path + ‘/topo’,</dt><dd><p>topo_structured_data)</p>
</dd>
<dt>subsurface.writer.to_binary.base_structs_to_binary_file(data_path + ‘/collars’,</dt><dd><p>borehole_location_struct)</p>
</dd>
<dt>for e, tri_surf in enumerate(profiles_trisurf_list):</dt><dd><dl class="simple">
<dt>subsurface.writer.to_binary.base_structs_to_binary_file(data_path + f’/profile_{e}_mesh’,</dt><dd><p>tri_surf.mesh)</p>
</dd>
<dt>subsurface.writer.to_binary.base_structs_to_binary_file(</dt><dd><p>data_path + f’/profile_{e}_texture_C’,
tri_surf.texture,
order=’C’)</p>
</dd>
</dl>
</dd>
</dl>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.000 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-examples-getting-started-getting-started-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/ee05557a420390016cc326bd2c5af83d/getting_started.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">getting_started.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/922e8b4a702a48e4f0440f177ee2b783/getting_started.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">getting_started.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../examples/gempy_model.html" class="btn btn-neutral float-left" title="Reading Simple GemPy model in Subsurface" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../tutorials/reading_well_data.html" class="btn btn-neutral float-right" title="Reading Well Data into Subsurface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019-2021, The softwareunderground community.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>